<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bethel - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'serif': ['Georgia', 'serif'],
                    },
                    colors: {
                        'deep-blue': '#1e3a8a',
                        'white': '#ffffff',
                    }
                }
            }
        }
    </script>
    <style>
        /* Enhanced dropdown styles */
        .dropdown-container {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            color: #1e3a8a;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            min-width: 12rem;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease-in-out;
        }
        
        .dropdown-container:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .dropdown-menu a {
            display: block;
            padding: 0.25rem 0;
            color: #1e3a8a;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        .dropdown-menu a:hover {
            color: #1e3a8a;
        }
        
        .dropdown-menu .all-link {
            font-weight: 600;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 0.25rem;
            padding-bottom: 0.25rem;
        }
        
        .dropdown-menu .divider {
            border-top: 1px solid #e5e7eb;
            margin: 0.25rem 0;
            padding-top: 0.25rem;
        }
        
        .dropdown-menu .no-items {
            color: #6b7280;
            font-size: 0.875rem;
        }
    </style>
    <style>
      @media (max-width: 640px) {
        section.relative.w-full.h-screen.overflow-hidden {
          height: 100vh !important;
          min-height: 100vh !important;
          max-height: none !important;
        }
        #hero-media-container,
        .hero-swiper,
        .hero-swiper .swiper-wrapper,
        .hero-swiper .swiper-slide,
        .hero-swiper img,
        .hero-swiper video {
          height: 100% !important;
          min-height: 100vh !important;
          max-height: none !important;
        }
        .max-w-5xl.mx-auto.px-6.py-32.flex.flex-col.items-center.text-center {
          padding-top: 2rem !important;
          padding-bottom: 2rem !important;
        }
        .text-5xl.md\:text-7xl.font-bold.mb-6.text-white.drop-shadow-lg {
          font-size: 2rem !important;
          margin-bottom: 1rem !important;
        }
        .text-xl.md\:text-2xl.mb-8.text-white.drop-shadow-lg.max-w-3xl {
          font-size: 1rem !important;
          margin-bottom: 1.5rem !important;
        }
        .flex.flex-col.sm\:flex-row.gap-4 {
          flex-direction: column !important;
          gap: 0.75rem !important;
        }
        .flex.flex-col.sm\:flex-row.gap-4 a {
          width: 100% !important;
          font-size: 1rem !important;
          padding-left: 0 !important;
          padding-right: 0 !important;
        }
        /* Force mobile layout for sermon cards */
        @media (max-width: 767px) {
          .auto-scroll-sermons {
            display: flex !important;
            flex-direction: row !important;
            overflow-x: auto !important;
            gap: 1rem !important;
            padding-bottom: 1rem !important;
          }
          .auto-scroll-sermons > div {
            min-width: 280px !important;
            flex-shrink: 0 !important;
          }
        }
        /* Force mobile layout for news cards */
        @media (max-width: 767px) {
          .auto-scroll-news {
            display: flex !important;
            flex-direction: row !important;
            overflow-x: auto !important;
            gap: 1rem !important;
            padding-bottom: 1rem !important;
          }
          .auto-scroll-news > div {
            min-width: 280px !important;
            flex-shrink: 0 !important;
          }
        }
        /* Ensure content doesn't interfere with swipe navigation */
        .relative.z-10 {
          z-index: 10 !important; /* Lower than swipe area */
        }
      }
    </style>
</head>
<body class="bg-gray-50 text-[#1e3a8a] font-sans">
{% load static %}
    <!-- NAVBAR -->
    <header class="bg-deep-blue text-white py-4 px-4 flex items-center justify-between relative z-50">
        <div class="flex items-center space-x-4">
            {% if global_settings.global_nav_logo %}
                <img src="{{ global_settings.get_global_nav_logo_url }}" alt="Bethel Logo" class="w-8 h-8 rounded-full object-cover">
            {% else %}
                <img src="{% static 'img/bethel_logo.png' %}" alt="Bethel Logo" class="w-8 h-8 rounded-full">
            {% endif %}
            <span class="text-2xl font-bold font-serif">Bethel Prayer Ministry</span>
        </div>
        <!-- Desktop Nav (hidden on mobile) -->
        <nav class="hidden md:flex space-x-6 text-sm">
            <a href="/churches/" class="hover:text-white transition-colors font-semibold">Find a Bethel Church</a>
            <a href="/about" class="hover:text-white transition-colors">About Us</a>
            <a href="/sermon" class="hover:text-white transition-colors">Sermons</a>
            <div class="dropdown-container">
                <button class="hover:text-white transition-colors">Events ▾</button>
                <div class="dropdown-menu">
                    <a href="/events/" class="all-link">All Events</a>
                    <a href="/events/calendar/" class="text-sm">Calendar</a>
                    {% for event in all_events %}
                    <a href="/events/{{ event.id }}/" class="text-sm">{{ event.title }}</a>
                    {% empty %}
                    <span class="no-items">No events available</span>
                    {% endfor %}
                </div>
            </div>
            <div class="dropdown-container">
                <button class="hover:text-white transition-colors">Ministries ▾</button>
                <div class="dropdown-menu">
                    <a href="/ministries/" class="all-link">All Ministries</a>
                    {% for ministry in all_ministries %}
                    <a href="/ministries/{{ ministry.id }}/" class="text-sm">{{ ministry.name }}</a>
                    {% empty %}
                    <span class="no-items">No ministries available</span>
                    {% endfor %}
                </div>
            </div>
            <a href="/leadership" class="hover:text-white transition-colors">Leadership</a>
            <a href="/shop" class="hover:text-white transition-colors">Shop</a>
            <a href="/donation" class="hover:text-white transition-colors font-semibold">Donation</a>
        </nav>
        <!-- Mobile Hamburger Button -->
        <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none" aria-label="Open menu">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </header>
    
    <!-- Mobile Menu (separate from header) -->
    <div id="mobile-menu" class="fixed inset-0 z-50 bg-white bg-opacity-95 flex flex-col text-lg font-semibold text-[#1e3a8a] hidden">
        <!-- Close button at the top (fixed) -->
        <button id="mobile-menu-close" class="absolute top-4 right-4 text-3xl text-[#1e3a8a] hover:text-gray-600 p-2 z-10" aria-label="Close menu">&times;</button>
        
        <!-- Scrollable navigation links container -->
        <div class="flex-1 overflow-y-auto pt-16 pb-8">
            <div class="w-full max-w-sm mx-auto px-4">
                <a href="/" class="block w-full text-center py-3 bg-[#1e3a8a] bg-opacity-20 rounded-lg mb-2">Home</a>
                <a href="/churches/" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2 font-bold">Find a Bethel Church</a>
                <a href="/about" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">About Us</a>
                <a href="/sermon" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Sermons</a>
                <a href="/events/" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Events</a>
                <a href="/events/calendar/" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Calendar</a>
                <a href="/ministries/" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Ministries</a>
                <a href="/leadership" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Leadership</a>
                <a href="/shop" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2">Shop</a>
                <a href="/donation" class="block w-full text-center py-3 hover:bg-[#1e3a8a] hover:bg-opacity-20 rounded-lg mb-2 font-bold">Donation</a>
            </div>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
    <div class="max-w-7xl mx-auto px-6 py-4">
        {% for message in messages %}
        <div class="mb-4 p-4 rounded-lg {% if message.tags == 'success' %}bg-[#1e3a8a] text-white{% elif message.tags == 'error' %}bg-[#1e3a8a] text-white{% else %}bg-[#1e3a8a] text-white{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}



    <!-- 1. Hero Section -->
    <section class="relative w-full h-screen overflow-hidden">
        {% if hero %}
            <div id="hero-media-container" class="absolute inset-0 w-full h-full">
                {% if hero.hero_media.all %}
                <!-- Swiper Carousel -->
                <div class="swiper hero-swiper h-full">
                    <div class="swiper-wrapper h-full">
                        {% for media in hero.hero_media.all|dictsort:'order' %}
                            {% if media.image %}
                            <div class="swiper-slide h-full">
                                <img src="{{ media.get_image_url }}" alt="Hero Media" class="w-full h-full object-cover" />
                            </div>
                            {% endif %}
                            {% if media.video %}
                            <div class="swiper-slide h-full">
                                <video class="w-full h-full object-cover" autoplay muted loop>
                                    <source src="{{ media.get_video_url }}" type="video/mp4" />
                                </video>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                </div>
                {% elif hero.background_video %}
                    <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover">
                        <source src="{{ hero.background_video }}" type="video/mp4" />
                    </video>
                {% elif hero.background_image %}
                    <img src="{{ hero.get_background_image_url }}" alt="{{ hero.title }}" class="absolute inset-0 w-full h-full object-cover" />
                {% else %}
                    <div class="absolute inset-0 bg-gray-500"></div>
                {% endif %}
            </div>
            <div class="absolute inset-0 bg-black bg-opacity-40"></div>
            <div class="absolute inset-0 flex flex-col justify-center items-center z-10 px-6 text-center max-w-5xl mx-auto">
                <h1 class="text-5xl md:text-7xl font-bold mb-6 text-white drop-shadow-lg">{{ hero.title }}</h1>
                <p class="text-xl md:text-2xl mb-8 text-white drop-shadow-lg max-w-3xl">{{ hero.subtitle }}</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="{{ hero.primary_button_link }}" class="bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">{{ hero.primary_button_text }}</a>
                    <a href="{{ hero.secondary_button_link }}" class="bg-transparent border-2 border-white text-white hover:bg-white hover:text-[#1e3a8a] px-8 py-3 rounded-lg font-semibold transition duration-300">{{ hero.secondary_button_text }}</a>
                </div>
            </div>
        {% else %}
            <!-- Fallback hero without hero content -->
            <div class="absolute inset-0 bg-gray-500"></div>
            <div class="relative z-10 max-w-5xl mx-auto px-6 py-32 flex flex-col items-center text-center">
                <h1 class="text-5xl md:text-7xl font-bold mb-6 text-white">
                    Welcome to Bethel
                </h1>
                <p class="text-xl md:text-2xl mb-8 text-white max-w-3xl">
                    Join us in worship and community as we grow together in faith.
                </p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="/visit" class="bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">
                        Plan Your Visit
                    </a>
                    <a href="/watch" class="bg-transparent border-2 border-white text-white hover:bg-white hover:text-deep-blue px-8 py-3 rounded-lg font-semibold transition duration-300">
                        Watch Online
                    </a>
                </div>
            </div>
        {% endif %}
    </section>

    <!-- 2. Featured Events -->
    <section class="py-16 bg-very-white">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 text-deep-blue">Upcoming Events</h2>
            <!-- Upcoming Events Section -->
            <div class="auto-scroll-events flex space-x-4 overflow-x-auto md:grid md:grid-cols-2 lg:grid-cols-3 md:space-x-0 md:gap-8">
                {% for event in upcoming_events %}
                    <div class="min-w-[280px] md:min-w-0">{% include 'core/_event_card.html' with event=event %}</div>
                {% empty %}
                <div class="col-span-3 text-center text-gray-600">
                    <p>No upcoming events at the moment. Check back soon!</p>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-8">
                <a href="/events/" class="bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">
                    View All Events
                </a>
            </div>
        </div>
    </section>

    <!-- 3. Ministries -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 text-deep-blue">Our Ministries</h2>
            <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8">
                {% for ministry in ministries %}
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition flex flex-col min-h-[340px] h-full">
                    {% if ministry.image %}
                    <img src="{{ ministry.get_image_url }}" alt="{{ ministry.name }}" class="w-full h-32 object-cover">
                    {% else %}
                    <div class="h-32 bg-gradient-to-br from-indigo-500 to-indigo-200 flex items-center justify-center">
                        <i class="fas fa-hands-helping text-white text-6xl"></i>
                    </div>
                    {% endif %}
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-xl font-bold text-gray-900 mb-2">{{ ministry.name }}</h3>
                        <p class="text-gray-700 text-sm mb-4 line-clamp-2">{{ ministry.description }}</p>
                        <a href="{% url 'ministry_detail' ministry.id %}" class="text-[#1e3a8a] hover:text-[#1e3a8a] font-semibold mt-auto">Learn More →</a>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-3 text-center text-gray-600">
                    <p>Ministry information coming soon!</p>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-8">
                <a href="/ministries/" class="bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">
                    View All Ministries
                </a>
            </div>
        </div>
    </section>

    <!-- 4. Latest Sermons -->
    <section class="py-16 bg-very-white">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 text-deep-blue">Latest Sermons</h2>
            <!-- Latest Sermons Section -->
            <div class="auto-scroll-sermons flex space-x-4 overflow-x-auto md:grid md:grid-cols-2 lg:grid-cols-3 md:space-x-0 md:gap-8">
                {% for sermon in sermons %}
                <a href="/sermon/" class="block min-w-[280px] md:min-w-0 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-lg transition flex flex-col min-h-[340px] h-full focus:outline-none focus:ring-2 focus:ring-[#1e3a8a]">
                    {% if sermon.thumbnail %}
                    <img src="{{ sermon.get_thumbnail_url }}" alt="{{ sermon.title }}" class="w-full h-32 object-cover">
                    {% else %}
                    <div class="h-32 bg-gradient-to-br from-blue-500 to-blue-200 flex items-center justify-center">
                        <i class="fas fa-microphone-alt text-white text-6xl"></i>
                    </div>
                    {% endif %}
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-xl font-semibold mb-2 text-deep-blue">{{ sermon.title }}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ sermon.description }}</p>
                        <span class="text-[#1e3a8a] font-semibold">{{ sermon.date|date:"M d, Y" }}</span>
                    </div>
                </a>
                {% empty %}
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2 text-deep-blue">No Sermons Yet</h3>
                        <p class="text-gray-600 mb-4">Check back soon for inspiring messages from our pastors.</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-8">
                <a href="/sermon" class="bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">
                    View All Sermons
                </a>
            </div>
        </div>
    </section>

    <!-- 5. Latest News -->
    <section class="py-16 bg-[#f1f5fd]">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 text-[#1e3a8a]">Latest News</h2>
            <!-- Latest News Section -->
            <div class="auto-scroll-news flex space-x-4 overflow-x-auto md:grid md:grid-cols-3 md:space-x-0 md:gap-8">
                {% for news_item in news %}
                <a href="{% url 'news_detail' news_item.id %}" class="min-w-[280px] md:min-w-0 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-lg transition flex flex-col min-h-[340px] h-full focus:outline-none focus:ring-2 focus:ring-[#1e3a8a]">
                    {% if news_item.image %}
                    <img src="{{ news_item.get_image_url }}" alt="{{ news_item.title }}" class="w-full h-32 object-cover">
                    {% else %}
                    <div class="h-32 bg-gradient-to-br from-purple-500 to-purple-200 flex items-center justify-center">
                        <i class="fas fa-newspaper text-white text-6xl"></i>
                    </div>
                    {% endif %}
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-xl font-semibold mb-2 text-deep-blue">{{ news_item.title }}</h3>
                        <div class="text-gray-600 text-sm mb-4 line-clamp-2">{{ news_item.content|truncatewords:20|safe }}</div>
                        <span class="text-[#1e3a8a] font-semibold">{{ news_item.date|date:"M d, Y" }}</span>
                    </div>
                </a>
                {% empty %}
                <div class="col-span-3 text-center text-[#1e3a8a]">
                    <p>No news articles at the moment.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- 6. Recent Testimonies -->
    <section class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-8 text-deep-blue">Recent Testimonies</h2>
            <!-- Recent Testimonies Section -->
            <div class="auto-scroll-testimonies flex space-x-4 overflow-x-auto md:grid md:grid-cols-3 md:space-x-0 md:gap-8">
                {% for testimony in recent_testimonies %}
                <div class="min-w-[280px] md:min-w-0 bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-lg transition flex flex-col min-h-[340px] h-full">
                    <div class="p-6 flex flex-col flex-1">
                        <h3 class="text-xl font-semibold mb-2 text-deep-blue">{{ testimony.title }}</h3>
                        <div class="text-gray-600 text-sm mb-4 line-clamp-2">{{ testimony.content|truncatewords:20|safe }}</div>
                        <span class="text-[#1e3a8a] font-semibold">{{ testimony.get_display_name }}</span>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-3 text-center text-[#1e3a8a]">
                    <p>No testimonies at the moment.</p>
                </div>
                {% endfor %}
            </div>
            <a href="{% url 'testimonies' %}" class="inline-block bg-[#1e3a8a] hover:bg-white text-white px-8 py-3 rounded-lg font-semibold transition duration-300">Read More Testimonies</a>
        </div>
    </section>

    <!-- 7. Newsletter Signup -->
    <section class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-6 text-white">Stay Connected</h2>
            <p class="text-xl mb-8 text-very-white">Get the latest updates, events, and inspiring content delivered to your inbox.</p>
            <form method="post" action="/newsletter-signup/" class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
                {% csrf_token %}
                <input 
                    type="email" 
                    name="email" 
                    placeholder="Enter your email" 
                    required
                    class="flex-1 px-4 py-3 rounded-lg border-0 focus:ring-2 focus:ring-white focus:outline-none text-gray-900 placeholder-gray-500"
                >
                <button type="submit" class="bg-deep-blue hover:bg-[#1e3a8a] text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                    Subscribe
                </button>
            </form>
        </div>
    </section>

    <!-- 8. Footer -->
    <footer class="bg-deep-blue text-white py-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Bethel</h3>
                    <p class="text-very-white">Building lives, transforming communities through the love of Christ.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-very-white">
                        <li><a href="/about" class="hover:text-white">About Us</a></li>
                        <li><a href="/services" class="hover:text-white">Services</a></li>
                        <li><a href="/events" class="hover:text-white">Events</a></li>
                        <li><a href="/contact" class="hover:text-white">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Connect</h4>
                    <ul class="space-y-2 text-very-white">
                        <li><a href="{% url 'donation' %}" class="hover:text-white">Give</a></li>
                        <li><a href="/volunteer" class="hover:text-white">Volunteer</a></li>
                        <li><a href="/prayer" class="hover:text-white">Prayer Requests</a></li>
                        <li><a href="/resources" class="hover:text-white">Resources</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Contact Info</h4>
                    <div class="text-very-white space-y-2">
                        <p>123 Church Street</p>
                        <p>City, State 12345</p>
                        <p>Phone: (555) 123-4567</p>
                        <p>Email: info@bethel.com</p>
                    </div>
                </div>
            </div>
            <div class="border-t border-white mt-8 pt-8 text-center text-very-white">
                <p>&copy; 2024 Bethel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const menuBtn = document.getElementById('mobile-menu-button');
            const menu = document.getElementById('mobile-menu');
            const closeBtn = document.getElementById('mobile-menu-close');
            
            function openMobileMenu() {
                menu.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            }
            
            function closeMobileMenu() {
                menu.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling
            }
            
            // Open menu
            if (menuBtn) {
                menuBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    openMobileMenu();
                });
            }
            
            // Close menu
            if (closeBtn) {
                closeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeMobileMenu();
                });
            }
            
            // Close menu when clicking a link
            if (menu) {
                menu.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function() {
                        closeMobileMenu();
                    });
                });
            }
            
            // Close menu when clicking outside
            menu.addEventListener('click', function(e) {
                if (e.target === menu) {
                    closeMobileMenu();
                }
            });
            
            // Close menu on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && !menu.classList.contains('hidden')) {
                    closeMobileMenu();
                }
            });
        });
    </script>
    <!-- Swiper.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <script>
        // Initialize Swiper for hero carousel with swipe navigation
        new Swiper('.hero-swiper', {
            loop: true,
            autoplay: { delay: 5000, disableOnInteraction: false },
            pagination: { el: '.swiper-pagination', clickable: true },
            // Enable touch/swipe navigation
            allowTouchMove: true,
            touchRatio: 1,
            touchAngle: 45,
            grabCursor: true,
            // Hide navigation arrows since we're using swipe
            navigation: false,
        });
    </script>
    <!-- Auto-scroll script for carousels -->
    <script>
        function autoScrollCarousel(selector, interval = 2000) {
            const container = document.querySelector(selector);
            if (!container) return;
            let scrollAmount = 0;
            let maxScroll = container.scrollWidth - container.clientWidth;
            let direction = 1;
            setInterval(() => {
                if (window.innerWidth >= 768) return; // Only auto-scroll on mobile
                if (container.scrollLeft >= maxScroll) {
                    direction = -1;
                } else if (container.scrollLeft <= 0) {
                    direction = 1;
                }
                scrollAmount = direction === 1 ? container.scrollLeft + 300 : container.scrollLeft - 300;
                container.scrollTo({ left: scrollAmount, behavior: 'smooth' });
            }, interval);
        }
        document.addEventListener('DOMContentLoaded', function() {
            autoScrollCarousel('.auto-scroll-events');
            autoScrollCarousel('.auto-scroll-sermons');
            autoScrollCarousel('.auto-scroll-news');
            autoScrollCarousel('.auto-scroll-testimonies');
        });
    </script>
    
    <!-- Cookie Consent Popup -->
    {% include 'core/cookie_consent.html' %}
</body>
</html> 